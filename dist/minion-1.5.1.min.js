/*
 * minion.JS v1.5.1
 * http://minion.org
 *
 * (c) 2012, Taka Kojima (taka@gigafied.com)
 * Licensed under the MIT License
 *
 * Date: Sun Feb 5 09:08:32 2012 -0800
 */
 var minion=function(a){"use strict",Array.prototype.indexOf=Array.prototype.indexOf||function(a,b){if(!!this.length&&this instanceof Array&&arguments.length>=1){b=b||0;if(b<this.length){while(b<this.length){if(this[b]===a)return b;b+=1}return-1}return-1}return-1};var b=[],c=["minion"],d=".",e="",f="",g,h=[],i=[],j,k=[],l=[],m,n=500,o=typeof window=="undefined",p=a,q={},r=1e4,s={},t=Array._isArray||function(a){return a instanceof Array},u=function(a){return typeof a=="object"},v=function(a){return typeof a=="string"||a instanceof String},w=function(a){return typeof a=="function"},x=function(a){return t(a)?a:[a]},y=function(a,b,c){b=b||[];if(!c)return a||[].concat(b);b=[].concat(b),a=a||[];for(var d=0,e=a.length;d<e;d+=1)b.indexOf(a[d])<0&&(b[b.length]=a[d]);return b},z=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])},A=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=null,delete b[c])},B=function(a){a=s.get(a,!1);var b;if(!a.__isDefined)return!1;if(a.__dependencies)for(b=0;b<a.__dependencies.length;b+=1)if(!B(a.__dependencies[b]))return!1;return!0},C=function(){var a,b,c,d,e,f;c={},e={},f=[];for(a=h.length-1;a>=0;a--){c=h[a],d=!0;for(b=0;b<c.c.length;b++){d=B(c.c[b]);if(!d)break}d&&(c.cb&&c.cb.apply(p,s.get(c.c)),h.splice(a,1))}},D=function(){var a=i,b,c,e,f;for(b=a.length-1;b>=0;b--){e=a[b].split(d),f=e.splice(e.length-1,1)[0],e=s.get(e.join(d),!1);if(e[f].__toExtend){c=s.get(e[f].__extendedFrom,!1);if(c.__isDefined){e[f].__toExtend=!1,delete e[f].__toExtend,e[f]=s.extend(e[f].__extendedFrom,e[f]),a.splice(b,1),setTimeout(D,0);return}}}C()},E=function(){var a=k,b,c;j&&clearTimeout(j);for(b=0;b<a.length;b+=1)c=a[b],c.e+=50,s.isDefined(c.c)?c.s.onload():c.e>=r&&c.s.onerror();a.length>0&&(j=setTimeout(E,n))},F=function(a,b){var c=document,d="body",e,f;if(!c[d])return setTimeout(function(){F(a,b)},0);f=c.createElement("script"),f.async=!0,e={f:a,c:b,e:0,s:f},k.push(e),f.onreadystatechange=f.onload=function(a){s.isDefined(b)&&(e.s.onload=e.s.onreadystatechange=null,e.s.onerror=null,k.splice(k.indexOf(e),1))},f.onerror=function(a){throw e.s.onerror=null,k.splice(k.indexOf(e),1),Error(e.c+" failed to load. Attempted to load from file: "+e.f)},f.src=a,c[d].appendChild(f)},G=function(a){h.push(a);for(var b=0;b<a.f.length;b+=1)o?require(a.f[b]):F(a.f[b],a.c[b]);j=setTimeout(E,n)},H=function(a,b,e){a=a||"",e=e||!1;var f=q,g;if(a&&!u(a)&&!w(a)){var h=a.split(d);c.indexOf(h[0])>-1&&(f=s,h.splice(0,1));for(g=0;g<h.length;g+=1){if(!f[h[g]]){if(!b)return!1;f[h[g]]={}}f=f[h[g]]}}else{if(a==="")return!1;f=a}if(e){e.require=y(e.require);var j=e.require;for(var k in e)if(k!=="require"){var l=a+d+k,m=e[k];m.__extendedFrom&&j.push(m.__extendedFrom),m.__toExtend&&i.indexOf(l)<0&&i.push(l),m.__static=m.__static||{},m.__nsID=a,m.__ns=f,m.__class=k,j.length>0&&(m.__dependencies=y(m.__dependencies,j,!0),s.require(j));if(s.isDefined(m)&&m.prototype){var n=m.prototype;n.__nsID=a,n.__ns=f,n.__class=k,j.length>0&&(n.__dependencies=y(n.__dependencies,j,!0))}f[k]=m}}return f};return s.configure=function(a){a=a||{},e=a.classPath||e,e=e.lastIndexOf("/")===e.length-1?e:e+"/",d=a.separator||d,f=a.fileSuffix||f;if(a.paths)for(var b=0;b<a.paths.length;b++){var c=a.paths[b];s.provides(c.file,c.classes)}g=!0},s.alias=function(a){return c.push(a),s},s.getAliases=function(){return c},s.separator=function(){return d},s.get=function(a){if(!t(a))return H(a,!1);var b=s.use(a,{}),c=[];for(var d in b)b.hasOwnProperty(d)&&c.push(b[d]);return c},s.define=function(a,b){var c=H(a,!0,b);return D(),c},s.getURL=function(a){if(b[a])return b[a];var c=a.indexOf("*")>-1;a=c?a.replace(".*",""):a;var g=e+a.replace(RegExp("\\"+d,"g"),"/")+(c?"":".js")+(f?"?"+f:"");return g},s.isDefined=function(a){return a=!u(a)&&!w(a)?H(a,!1):a,a?a.__isDefined:!1},s.extend=function(a,b){return s.isDefined(a)?b=s.get(a).__extend(b):b.__toExtend=!0,b.__extendedFrom=a,b},s.provides=function(a,c){c=x(c);for(var d=0;d<c.length;d+=1)b[c[d]]=a},s.require=function(a,b){g||s.configure(),a=x(a);var c=[],d=[];for(var e=0;e<a.length;e++){var f=a[e],h=s.getURL(f),i=s.get(f);d.push(f),l.indexOf(h)<0&&!s.get(f)&&(c.push(h),l.push(h))}if(c.length>0){var j={f:c,c:d,cb:b};setTimeout(function(){G(j)},0)}else b&&b.apply(p,s.get(a))},s.use=function(a,b){a=a||[],a=x(a),b=b||q,b===q&&s.unuse();var c,e,f,g,h;for(c=0;c<a.length;c+=1){e=a[c],f=s.get(e,!0),g=e.split(d),e=g.splice(g.length-1,1)[0],g=s.get(g.join(d),!1);if(e==="*")for(h in g)g.hasOwnProperty(h)&&(b[h]=g[h]);else g[e]&&(b[e]=g[e])}return b},s.enableNotifications=function(){s.isDefined("minion.NotificationManager")&&(m||(m=new(minion.get("minion.NotificationManager")),s.subscribe=function(){m.subscribe.apply(m,arguments)},s.unsubscribe=function(){m.unsubscribe.apply(m,arguments)},s.publish=function(){m.publish.apply(m,arguments)},s.holdNotification=function(){m.holdNotification.apply(m,arguments)},s.releaseNotification=function(){m.releaseNotification.apply(m,arguments)},s.cancelNotification=function(){m.cancelNotification.apply(m,arguments)}))},typeof p.define=="function"&&p.define.amd&&p.define([],function(){return s}),o&&(module.exports=s),s}(this);(function(){"use strict",minion.define("minion",{__BaseClass__:function(){var a=function(a){var b,c,d;if(!a||typeof a!="object")return a;if(a instanceof Date)return(new Date).setTime(a.getTime());if(a instanceof Array)return a.concat();if(typeof a=="object"){d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);return d}return a},b=function(a,b){return function(){var c=this.__super||null;this.__super=b;var d=a.apply(this,arguments);return c?this.__super=c:(this.__super=null,delete this.__super),d}},c=/xyz/.test(function(){var a})?/\b__super\b/:/.*/,d=function(){};return d.__isDefined=!0,d.__extend=function(e){var f=this,g=new f("__no_init__"),h={},i=this;for(var j in e)e.hasOwnProperty(j)&&(j!=="__static"?typeof e[j]=="function"&&typeof g[j]=="function"&&c.test(e[j])?g[j]=b(e[j],g[j]):g[j]=e[j]:typeof e[j]=="object"&&j.indexOf("__")!==0&&(h[j]=e[j]));var k=function(){if(arguments[0]!=="__no_init__"){k.prototype.hasOwnProperty("__imports")||(k.prototype.__imports=minion.use(this.__dependencies,{}));if(!this.__preInit){for(var b in h)h.hasOwnProperty(b)&&(this[b]=a(h[b]));return this.init.apply(this,arguments)}return this.__preInit.apply(this,arguments)}};k.prototype=g,k.prototype.constructor=k,k.__extend=d.__extend,k.prototype.__extend=function(a,b){return function(){return b.apply(a,arguments)}}(k,k.__extend),k.__ns=e.__ns||"",k.__nsID=e.__nsID||"",k.__class=e.__class||"",k.__dependencies=e.__dependencies||[];var l;if(e.__static){k.__static=k.__static||{};for(l in e.__static)k[l]||(k[l]=e.__static[l],k.__static[l]=e.__static[l]);k.__static=e.__static}if(this.__static){k.__static=k.__static||{};for(l in this.__static)k[l]||(k[l]=this.__static[l],k.__static[l]=this.__static[l])}if(k.__static.__isStatic){var m=k,n=new m;n.__static=k.__static;for(l in k.__static)n[l]=k.__static[l];return n}return k},d}()})})(),function(){"use strict",minion.define("minion",{Class:minion.extend("minion.__BaseClass__",{__static:{__isDefined:!0},init:function(){this._interestHandlers||(this._interestHandlers=[])},setTimeout:function(a,b){return setTimeout(this.proxy(a),b)},setInterval:function(a,b){return setInterval(this.proxy(a),b)},proxy:function(a){var b=function(a){if(!a)return this;var b=this;return function(){return b.apply(a,Array.prototype.slice.call(arguments))}};return b.call(a,this)},subscribe:function(a,b,c){this._interestHandlers||(this._interestHandlers=[]),b&&!this._interestHandlers[a]&&(minion.subscribe(this,a,c),this._interestHandlers[a]=b)},unsubscribe:function(a){this._interestHandlers&&this._interestHandlers[a]&&(this._interestHandlers[a]=null,delete this._interestHandlers[a]),minion.unsubscribe(this,a)},unsubscribeAll:function(){for(var a in this._interestHandlers)this._interestHandlers.hasOwnProperty(a)&&this.unsubscribe(a);this._interestHandlers=[]},publish:function(a,b,c){minion.publish(a,b,this,c)},handleNotification:function(a){var b=this._interestHandlers[a.name];b&&this.proxy(b)(a)}})})}(),function(){"use strict",minion.define("minion",{Singleton:minion.extend("minion.Class",{init:function(){},__preInit:function(){return this.constructor.__instance?this.constructor.__instance:(this.init.apply(this,arguments),this.constructor.__instance=this,this.constructor.__instance)},__static:{__isSingleton:!0,getInstance:function(){if(!this.__instance){var a=this;return this.__instance=new a,this.__instance}return this.__instance}}})})}(),function(){"use strict",minion.define("minion",{Static:minion.extend("minion.Singleton",{__static:{__isDefined:!0,__isStatic:!0},init:function(){}})})}(),function(){"use strict",minion.define("minion",{Notification:minion.extend("minion.Class",{data:{},name:"",dispatcher:null,status:0,pointer:0,callback:null,init:function(a,b,c){this.name=a,this.data=b,this.callback=c},hold:function(){this.status=2},release:function(){this.status=1,minion.releaseNotification(this)},cancel:function(){minion.cancelNotification(this),this.data={},this.name="",this.status=0,this.pointer=0,this.dispatcher=null,this.callback=null},dispatch:function(a){this.status=1,this.pointer=0,this.dispatcher=a,minion.publish(this)},respond:function(){this.callback&&(this.callback.apply(typeof this.dispatcher=="object"?this.dispatcher:this,arguments),this.callback=null,this.cancel())}})}),minion.define("minion",{require:["minion.Notification"],NotificationManager:minion.extend("minion.Singleton",{_pendingNotifications:[],_pendingNotificationNames:[],_interests:{},_removeQueue:[],subscribe:function(a,b,c){c=isNaN(c)?-1:c,this._interests[b]=this._interests[b]||[],c>-1&&c<this._interests[b].length?this._interests[b].splice(c,0,a):this._interests[b].push(a)},unsubscribe:function(a,b){if(b instanceof Array){for(var c=0;c<b.length;c++)this.unsubscribe(a,b[c]);return}var d=this._interests[b].indexOf(a);if(a&&d>-1)if(this._pendingNotificationNames.indexOf(b)>-1){var e=this._removeQueue[b]=this._removeQueue[b]||[];e.push(a)}else this._interests[b].splice(d,1)},publish:function(a,b,c,d){a instanceof this.__imports.Notification||(a=new this.__imports.Notification(a,b,d),a.status=1,a.pointer=0,a.dispatcher=c);var e=a.name;this._interests[e]&&(this._pendingNotifications.push(a),this._pendingNotificationNames.push(e),this._notifyObjects(a))},_notifyObjects:function(a){var b=a.name;while(a.pointer<this._interests[b].length){if(a.status!==1)return;this._interests[b][a.pointer].handleNotification&&this._interests[b][a.pointer].handleNotification(a),a.pointer++}a.status===1&&!a.callback&&this.cancelNotification(a)},getNotification:function(a){for(var b=0;b<this._pendingNotifications.length;b++)if(this._pendingNotifications[b].name===a)return this._pendingNotifications[b]},releaseNotification:function(a){a.status=1,this._pendingNotifications.indexOf(a)>-1&&this._notifyObjects(a)},cancelNotification:function(a){if(a){var b=a.name;this._pendingNotifications.splice(this._pendingNotifications.indexOf(a),1),a.status=0;if(this._removeQueue[b]){for(var c=0;c<this._removeQueue.length;c++)this.unsubscribe(this._removeQueue[b][c],b);this._removeQueue[b]=null,delete this._removeQueue[b]}a=null}}})}),minion.enableNotifications()}();
