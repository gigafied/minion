/*
 * f0xy.JS v1.4.0
 * http://f0xy.org
 *
 * (c) 2011, Taka Kojima
 * Licensed under the MIT License
 *
 * Date: Wed Dec 14 22:33:41 2011 -0800
 */
 var f0xy=function(a){"use strict",Array.prototype.indexOf=Array.prototype.indexOf||function(a,b){if(!!this.length&&this instanceof Array&&arguments.length>=1){b=b||0;if(b<this.length){while(b<this.length){if(this[b]===a)return b;b+=1}return-1}return-1}return-1};var b=[],c=".",d="",e="",f,g=[],h=[],i=[],j,k=[],l=[],m,n=500,o=null,p=process&&process.title==="node",q=a,r={},s=!1,t=1e4,u={},v=setTimeout,w=Array._isArray||function(a){return a instanceof Array},x=function(a){return typeof a=="object"},y=function(a){return typeof a=="string"||a instanceof String},z=function(a){return typeof a=="function"},A=function(a){return w(a)?a:[a]},B=function(a,b,c){b=b||[];if(!c)return a||[].concat(b);b=[].concat(b),a=a||[];for(var d=0,e=a.length;d<e;d+=1)b.indexOf(a[d])<0&&(b[b.length]=a[d]);return b},C=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])},D=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=null,delete b[c])},E=function(a){a=u.get(a,!1);var b;if(!a.__isDefined)return!1;if(a.__dependencies)for(b=0;b<a.__dependencies.length;b+=1)if(!E(a.__dependencies[b]))return!1;return!0},F=function(){var a,b,c,d,e,f;c={},e={},f=[];for(a=h.length-1;a>=0;a--){c=h[a],d=!0;for(b=0;b<c.c.length;b++){d=E(c.c[b]);if(!d)break}d&&(c.cb&&c.cb.apply(q,u.get(c.c)),h.splice(a,1))}},G=function(){var a=i,b,d,e,f;for(b=a.length-1;b>=0;b--){e=a[b].split(c),f=e.splice(e.length-1,1)[0],e=u.get(e.join(c),!1);if(e[f].__toExtend){d=u.get(e[f].__extendedFrom,!1);if(d.__isDefined){e[f].__toExtend=!1,delete e[f].__toExtend,e[f]=u.extend(e[f].__extendedFrom,e[f]),a.splice(b,1),v(G,0);return}}}F()},H=function(){var a=k,b,c;j&&clearTimeout(j);for(b=0;b<a.length;b+=1)c=a[b],c.e+=50,u.isDefined(c.c)?c.s.onload():c.e>=t&&c.s.onerror();a.length>0&&(j=v(H,n))},I=function(a,b){var c=document,d="body",e,f;if(l.indexOf(a)<0){if(!c[d])return v(function(){I(a,b)},0);f=c.createElement("script"),f.async=!0,e={f:a,c:b,e:0,s:f},l.push(a),k.push(e),f.onreadystatechange=f.onload=function(a){u.isDefined(b)&&(e.s.onload=e.s.onreadystatechange=null,e.s.onerror=null,k.splice(k.indexOf(e),1))},f.onerror=function(a){throw e.s.onerror=null,k.splice(k.indexOf(e),1),new Error(e.c+" failed to load. Attempted to load from file: "+e.f)},f.src=a,c[d].appendChild(f)}},J=function(a){h.push(a);for(var b=0;b<a.f.length;b+=1){if(p)var c=require(a.f[b]);else I(a.f[b],a.c[b]);g.push(a.f[b])}j=v(H,n)},K=function(a,b,d){a=a||"",d=d||!1;var e=r,f;if(a&&!x(a)&&!z(a)){var g=a.split(c);g[0]==="f0xy"&&(e=u,g.splice(0,1));for(f=0;f<g.length;f+=1){if(!e[g[f]])if(b)e[g[f]]={};else return!1;e=e[g[f]]}}else if(a!=="")e=a;else return!1;if(d){d.require=B(d.require);var h=d.require;for(var j in d)if(j!=="require"){var k=a+c+j,l=d[j];l.__extendedFrom&&h.push(l.__extendedFrom),l.__toExtend&&i.indexOf(k)<0&&i.push(k),l.__static=l.__static||{},l.__nsID=a,l.__ns=e,l.__class=j,h.length>0&&(l.__dependencies=B(l.__dependencies,h,!0),u.require(h));if(u.isDefined(l)&&l.prototype){var m=l.prototype;m.__nsID=a,m.__ns=e,m.__class=j,h.length>0&&(m.__dependencies=B(m.__dependencies,h,!0))}e[j]=l}s&&C(r,q)}return e};return u.configure=function(a){a=a||{},d=a.rootPath||d,d=d.lastIndexOf("/")===d.length-1?d:d+"/",c=a.separator||c,e=a.fileSuffix||e;var b=!0;a.noPollution&&(b=!a.noPollution),a.rootNS&&(q=a.rootNS);var g;f&&a.noPollution!==!0?b!==!1&&(C(r,q),s=!0):D(r,q),f=!0},u.get=function(a){if(!w(a))return K(a,!1);var b=u.use(a,{}),c=[];for(var d in b)c.push(b[d]);return c},u.define=function(a,b){var c=K(a,!0,b);return G(),c},u.getURL=function(a){if(o)return o;if(b[a])return b[a];var f=d+a.replace(new RegExp("\\"+c,"g"),"/")+".js"+(e?"?"+e:"");return f},u.isDefined=function(a){return a=!x(a)&&!z(a)?K(a,!1):a,a?a.__isDefined:!1},u.extend=function(a,b){return u.isDefined(a)?b=u.get(a).__extend(b):b.__toExtend=!0,b.__extendedFrom=a,b},u.provides=function(a,c,e,f){if(c==="*"){o=a;return}c=A(c),a=(new RegExp("(http://|/)[^ :]+")).test(a)?a:d+a;for(var g=0;g<c.length;g+=1)b[c[g]]=a;e&&u.require(c,f)},u.require=function(a,b){f||u.configure(),a=A(a);var c=[],d=[];for(var e=0;e<a.length;e+=1){var g=a[e],h=u.getURL(g);l.indexOf(h)<0&&!u.get(g)&&(c.push(h),d.push(g))}if(c.length>0){var i={f:c,c:d,cb:b};v(function(){J(i)},0)}else b&&b()},u.use=function(a,b){a=a||[],a=A(a),b=b||r,b===r&&u.unuse();var d,e,f,g,h;for(d=0;d<a.length;d+=1){e=a[d],f=u.get(e,!0),g=e.split(c),e=g.splice(g.length-1,1)[0],g=u.get(g.join(c),!1);if(e==="*")for(h in g)g.hasOwnProperty(h)&&(b[h]=g[h]);else g[e]&&(b[e]=g[e])}return b},u.getLoadedFiles=function(){return g.concat()},u.enableNotifications=function(){u.isDefined("f0xy.NotificationManager")&&(m||(m=new f0xy.NotificationManager))},u.addInterest=function(){m&&m.addInterest.apply(m,arguments)},u.addInterests=function(){m&&m.addInterests.apply(m,arguments)},u.removeInterest=function(){m&&m.removeInterest.apply(m,arguments)},u.removeInterests=function(){m&&m.removeInterests.apply(m,arguments)},u.removeAllInterests=function(){m&&m.removeAllInterests.apply(m,arguments)},u.notify=function(){m&&m.notify.apply(m,arguments)},u.holdNotification=function(){m&&m.holdNotification.apply(m,arguments)},u.releaseNotification=function(){m&&m.releaseNotification.apply(m,arguments)},u.cancelNotification=function(){m&&m.cancelNotification.apply(m,arguments)},u.publish=u.notify=function(a,b){if(m){var c=new f0xy.Notification(a,b);c.dispatch(u)}},typeof q.define=="function"&&q.define.amd&&q.define([],function(){return u}),p&&(module.exports=u),u}(this);(function(){"use strict",f0xy.define("f0xy",{__BaseClass__:function(){var a=function(a){var b,c,d;if(!a||typeof a!="object")return a;if(a instanceof Date)return(new Date).setTime(a.getTime());if(a instanceof Array)return a.concat();if(typeof a=="object"){d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);return d}return a},b=function(a,b){return function(){var c=this.__super||null;this.__super=b;var d=a.apply(this,arguments);return c?this.__super=c:(this.__super=null,delete this.__super),d}},c=/xyz/.test(function(){var a})?/\b__super\b/:/.*/,d=function(){};return d.__isDefined=!0,d.__extend=function(e){var f=this,g=new f("__no_init__"),h={},i=this;for(var j in e)e.hasOwnProperty(j)&&(j!=="__static"?typeof e[j]=="function"&&typeof g[j]=="function"&&c.test(e[j])?g[j]=b(e[j],g[j]):g[j]=e[j]:typeof e[j]=="object"&&j.indexOf("__")!==0&&(h[j]=e[j]));var k=function(){if(arguments[0]!=="__no_init__"){k.prototype.hasOwnProperty("__imports")||(k.prototype.__imports=f0xy.use(this.__dependencies,{}));if(!this.__preInit){for(var b in h)h.hasOwnProperty(b)&&(this[b]=a(h[b]));return this.init.apply(this,arguments)}return this.__preInit.apply(this,arguments)}};k.prototype=g,k.prototype.constructor=k,k.__extend=d.__extend,k.__ns=e.__ns||"",k.__nsID=e.__nsID||"",k._class=e._class||"",k.__dependencies=e.__dependencies||[];var l;if(e.__static){k.__static=k.__static||{};for(l in e.__static)k[l]||(k[l]=e.__static[l],k.__static[l]=e.__static[l]);k.__static=e.__static}if(this.__static){k.__static=k.__static||{};for(l in this.__static)k[l]||(k[l]=this.__static[l],k.__static[l]=this.__static[l])}return k},d}()})})(),function(){"use strict",f0xy.define("f0xy",{Class:f0xy.extend("f0xy.__BaseClass__",{__static:{__isDefined:!0},init:function(){this._interestHandlers||(this._interestHandlers=[])},setTimeout:function(a,b){return setTimeout(this.proxy(a),b)},setInterval:function(a,b){return setInterval(this.proxy(a),b)},proxy:function(a){var b=function(a){if(!a)return this;var b=this;return function(){return b.apply(a,Array.prototype.slice.call(arguments))}};return b.call(a,this)},addInterest:function(a,b,c){this._interestHandlers||(this._interestHandlers=[]),b&&!this._interestHandlers[a]&&(f0xy.addInterest(this,a,c),this._interestHandlers[a]=b)},removeInterest:function(a){this._interestHandlers&&this._interestHandlers[a]&&(this._interestHandlers[a]=null,delete this._interestHandlers[a]),f0xy.removeInterest(this,a)},removeAllInterests:function(){f0xy.removeAllInterests(this),this._interestHandlers=[]},notify:function(a,b){var c=new f0xy.Notification(a,b);c.dispatch(this)},handleNotification:function(a){var b=this._interestHandlers[a.name];b&&this.proxy(b)(a)},publish:function(a,b){this.notify(a,b)},subscribe:function(a,b,c){this.addInterest(a,b,c)},unsubscribe:function(a){this.removeInterest(a)},unsubscribeAll:function(){this.removeAllInterests()}})})}(),function(){"use strict",f0xy.define("f0xy",{require:["f0xy.Class"],Static:function(){var a=function(){throw new Error("This is a Static Class. Don't instantiate this Class.")};return a.__isDefined=!0,a.__isStatic=!0,a.__extend=function(a){var b=function(){throw new Error("This is a Static Class. Don't instantiate this Class.")},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);for(c in this)this.hasOwnProperty(c)&&(b[c]=this[c]);for(c in f0xy.Class.prototype)f0xy.Class.prototype.hasOwnProperty(c)&&(b[c]=f0xy.Class.prototype[c]);return b},a}()})}(),function(){"use strict",f0xy.define("f0xy",{Singleton:f0xy.extend("f0xy.Class",{__static:{__isSingleton:!0,getInstance:function(){if(!this.__instance){var a=this;return this.__instance=new a,this.__instance}return this.__instance}},__preInit:function(){return this.constructor.__instance?this.constructor.__instance:(this.init.apply(this,arguments),this.constructor.__instance=this,this.constructor.__instance)},init:function(){}})})}(),function(){"use strict",f0xy.define("f0xy",{NotificationManager:f0xy.extend("f0xy.Class",{_pendingNotifications:[],_interests:{},_removeQueue:[],init:function(){},addInterest:function(a,b,c){c=c||c===0?c:-1,typeof this._interests[b]=="undefined"&&(this._interests[b]=[]),c>-1&&c<this._interests[b].length?this._interests[b].splice(c,0,a):this._interests[b].push(a)},addInterests:function(a,b){for(var c=0;c<b.length;c++)if(typeof b[c]=="string")this.addInterest(a,b[c]);else if(typeof b[c]=="object"||typeof b[c]=="array"){var d=b[c].priority!==null&&b[c].priority!==undefined?b[c].priority:-1;this.addInterest(a,b[c].name,d)}},removeInterest:function(a,b){var c=this._interests[b].indexOf(a);if(a&&c>-1){var d=this.getNotification(b);if(d){var e=this._removeQueue[b]=this._removeQueue[b]||[];e.push(a)}else this._interests[b].splice(c,1)}},removeInterests:function(a,b){for(var c=0;c<b.length;c++)this.removeInterest(a,b[c])},removeAllInterests:function(a,b){if(a!==null)for(var c in this._interests)this._interests.hasOwnProperty[c]&&this.removeInterest(a,c);else b!==null&&(this._interests[b]=null)},notify:function(a){a.status="pending",a.pointer=0,this._interests[a.name]!==null&&(this._pendingNotifications.push(a),this._notifyObjects(a))},_notifyObjects:function(a){var b=a.name;while(a.pointer<this._interests[b].length)if(a.status==="pending")this._interests[b][a.pointer].handleNotification!==null&&this._interests[b][a.pointer].handleNotification(a),a.pointer++;else return;a.status==="pending"&&this.cancelNotification(a.name)},getNotification:function(a,b){for(var c=0;c<this._pendingNotifications.length;c++)if(this._pendingNotifications[c].name===a)return this._pendingNotifications[c];return b?new f0xy.Notification(a,b):!1},holdNotification:function(a){var b=this.getNotification(a);b&&(b.status="hold")},releaseNotification:function(a){var b=this.getNotification(a);b&&b.status==="hold"&&(b.status="pending",this._notifyObjects(b))},cancelNotification:function(a){var b=this.getNotification(a);if(b){this._pendingNotifications.splice(this._pendingNotifications.indexOf(b),1),b.status="";if(this._removeQueue[a]){for(var c=0;c<this._removeQueue.length;c++)this.removeInterest(this._removeQueue[a][c],a);this._removeQueue[a]=null,delete this._removeQueue[a]}}}})}),f0xy.define("f0xy",{Notification:f0xy.extend("f0xy.Class",{data:{},name:"",dispatcher:null,status:"",pointer:0,init:function(a,b){this.name=a,this.data=b},hold:function(){f0xy.holdNotification(this.name)},release:function(){f0xy.releaseNotification(this.name)},cancel:function(){f0xy.cancelNotification(this.name)},dispatch:function(a){this.dispatcher=a,f0xy.notify(this)}})}),f0xy.enableNotifications()}();
