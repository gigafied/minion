/*
 * minion.JS v2.0.0-alpha
 * http://minion.org
 *
 * (c) 2012, Taka Kojima (taka@gigafied.com)
 * Licensed under the MIT License
 *
 * Date: Sun Feb 12 20:18:22 2012 -0800
 */
 var minion=function(a){"use strict",Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(!!this.length&&this instanceof Array&&arguments.length>=1){b=b||0;if(b<this.length){while(b<this.length){if(this[b]===a)return b;b++}return-1}return-1}return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a||window,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var b=[],c=["minion"],d="",e="",f,g=[],h=[],i,j=[],k=[],l,m=500,n=typeof window=="undefined",o=a,p={},q=1e4,r=Array._isArray||function(a){return a instanceof Array},s=function(a){return typeof a=="object"},t=function(a){return typeof a=="function"},u=function(a){return r(a)?a:[a]},v=function(){var a,b,c,d,e;c={},d={},e=[];for(a=g.length-1;a>=0;a--)c=g[a],c.cb&&c.cb.apply(o,B.get(c.c)),g.splice(a,1)},w=function(){var a=h,b,c,d,e;for(b=a.length-1;b>=0;b--){d=a[b].split(minion.separator),e=d.splice(d.length-1,1)[0],d=B.get(d.join(minion.separator),!1);if(d[e].$$.toExtend){c=B.get(d[e].$$.extendedFrom,!1);if(c.$$.isDefined){d[e].$$.toExtend=!1,delete d[e].$$.toExtend,d[e]=B.extend(d[e].$$.extendedFrom,d[e]),a.splice(b,1),setTimeout(w,0);return}}}v()},x=function(){var a=j,b,c;i&&clearTimeout(i);for(b=0;b<a.length;b+=1)c=a[b],c.e+=50,B.isDefined(c.c)?c.s.onload():c.e>=q&&c.s.onerror();a.length>0&&(i=setTimeout(x,m))},y=function(a,b){var c=document,d="body",e,f;if(!c[d])return setTimeout(function(){y(a,b)},0);f=c.createElement("script"),f.async=!0,e={f:a,c:b,e:0,s:f},j.push(e),f.onreadystatechange=f.onload=function(a){B.isDefined(b)&&(e.s.onload=e.s.onreadystatechange=null,e.s.onerror=null,j.splice(j.indexOf(e),1))},f.onerror=function(a){throw e.s.onerror=null,j.splice(j.indexOf(e),1),Error(e.c+" failed to load. Attempted to load from file: "+e.f)},f.src=a,c[d].appendChild(f)},z=function(a){g.push(a);for(var b=0;b<a.f.length;b+=1)n?require(a.f[b]):y(a.f[b],a.c[b]);i=setTimeout(x,m)},A=function(a,b,d){a=a||"",d=d||!1;var e=p,f;if(a&&!s(a)&&!t(a)){var g=a.split(minion.separator);c.indexOf(g[0])>-1&&(e=B,g.splice(0,1));for(f=0;f<g.length;f+=1){if(!e[g[f]]){if(!b)return!1;e[g[f]]={}}e=e[g[f]]}}else{if(a==="")return!1;e=a}if(d)for(var i in d){var j=a+minion.separator+i,k=d[i];k.$$.toExtend&&h.indexOf(j)<0&&h.push(j),e[i]=k}return e},B={};return B.separator=".",B.configure=function(a){a=a||{},d=a.classPath||d,d=d.lastIndexOf("/")===d.length-1?d:d+"/",minion.separator=a.separator||minion.separator,e=a.fileSuffix||e;if(a.paths)for(var b=0;b<a.paths.length;b++){var c=a.paths[b];B.provides(c.file,c.classes)}f=!0},B.define=function(a,b){var c=A(a,!0,b);return w(),c},B.getURL=function(a){if(b[a])return b[a];var c=a.indexOf("*")>-1;a=c?a.replace(".*",""):a;var f=d+a.replace(RegExp("\\"+minion.separator,"g"),"/")+(c?"":".js")+(e?"?"+e:"");return f},B.isDefined=function(a){return a=!s(a)&&!t(a)?A(a,!1):a,a?a.$$.isDefined:!1},B.extend=function(a,b){return b.$$=b.$$||{},B.isDefined(a)?b=B.get(a).extend(b):b.$$.toExtend=!0,b.$$.extendedFrom=a,b},B.provides=function(a,c){c=u(c);for(var d=0;d<c.length;d+=1)b[c[d]]=a},B.require=function(a,b){f||B.configure(),a=u(a);var c=[],d=[];for(var e=0;e<a.length;e++){var g=a[e],h=B.getURL(g),i=B.get(g);d.push(g),k.indexOf(h)<0&&!B.get(g)&&(c.push(h),k.push(h))}if(c.length>0){var j={f:c,c:d,cb:b};z(j)}else b&&b.apply(o,B.get(a))},B.proxy=function(a,b){return a.bind(b)},B.enableNotifications=function(){if(B.isDefined("minion.NotificationManager")&&!l){var a=l=minion.get("minion.NotificationManager");B.subscribe=B.proxy(a.subscribe,a),B.unsubscribe=B.proxy(a.unsubscribe,a),B.publish=B.proxy(a.publish,a),B.publishNotification=B.proxy(a.publishNotification,a),B.holdNotification=B.proxy(a.holdNotification,a),B.releaseNotification=B.proxy(a.releaseNotification,a),B.cancelNotification=B.proxy(a.cancelNotification,a)}},typeof o.define=="function"&&o.define.amd&&o.define([],function(){return B}),n&&(module.exports=B),B}(this);(function(){"use strict";var a=function(a,b){return function(){var c=this.sup||null;this.sup=b;var d=a.apply(this,arguments);return c?this.sup=c:(this.sup=null,delete this.sup),d}},b=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a},c=/xyz/.test(function(){var a})?/\bthis\.sup\b/:/.*/;minion.define("minion",{BaseClass:function(){var d=function(){},e=function(){};return e.$$={isDefined:!0},e.extend=function(e,f){var g,h=this,i;e&&e.hasOwnProperty("init")?e&&e.hasOwnProperty("preInit")?g=e.preInit:g=e.init:g=function(){h.apply(this,arguments)},d.prototype=h.prototype,g.prototype=new d,b(g.prototype,e);for(i in e)i!=="static"&&typeof e[i]=="function"&&typeof g.prototype[i]=="function"&&c.test(e[i])&&(g.prototype[i]=a(e[i],g.prototype[i]));return g.prototype.constructor=g,g.prototype.static=g,b(g,e.static,f,h),g},e}()})})(),function(){"use strict",minion.define("minion",{Class:minion.extend("minion.__BaseClass__",{init:function(){},setTimeout:function(a,b){return setTimeout(this.proxy(a),b)},setInterval:function(a,b){return setInterval(this.proxy(a),b)},proxy:function(a){return minion.proxy(a,this)},subscribe:function(a,b,c){this._interestHandlers=this._interestHandlers||[],b&&!this._interestHandlers[a]&&(b=this.proxy(b),minion.subscribe(b,a,c),this._interestHandlers[a]=b)},unsubscribe:function(a){if(this._interestHandlers&&this._interestHandlers[a]){var b=this._interestHandlers[a];this._interestHandlers[a]=null,delete this._interestHandlers[a]}minion.unsubscribe(b,a)},unsubscribeAll:function(){for(var a in this._interestHandlers)this._interestHandlers.hasOwnProperty(a)&&this.unsubscribe(a);this._interestHandlers=[]},publish:function(a,b,c){minion.publish(a,b,this,c)}})})}(),function(){"use strict",minion.define("minion",{Singleton:minion.extend("minion.Class",{init:function(){},preInit:function(){return this.constructor.__instance?this.constructor.__instance:(this.init.apply(this,arguments),this.constructor.__instance=this,this.constructor.__instance)},"static":{getInstance:function(){if(!this.__instance){var a=this;return this.__instance=new a}return this.__instance}}})})}(),function(){"use strict",minion.define("minion",{Static:minion.extend("minion.Singleton",{init:function(){}})})}(),function(){"use strict";var a=function(a,b,c){this.name=a,this.data=b,this.callback=c};a.prototype.data={},a.prototype.name="",a.prototype.dispatcher=null,a.prototype.status=0,a.prototype.pointer=0,a.prototype.callback=null,a.prototype.hold=function(){this.status=2},a.prototype.release=function(){this.status=1,minion.releaseNotification(this)},a.prototype.cancel=function(){this.data={},this.name="",this.status=0,this.pointer=0,this.dispatcher=null,this.callback=null,d.cancelNotification(this)},a.prototype.dispatch=function(a){this.status=1,this.pointer=0,this.dispatcher=a,d.publishNotification(this)},a.prototype.respond=function(a){this.callback&&(this.callback.apply(this.dispatcher,arguments),this.cancel())};var b=[],c={};minion.define("minion",{NotificationManager:minion.extend("minion.Static",{subscribe:function(a,b,d){d=isNaN(d)?-1:d,c[b]=c[b]||[],d>-1&&d<c[b].length?c[b].splice(d,0,a):c[b].push(a)},unsubscribe:function(a,b){if(b instanceof Array){for(var d=0;d<b.length;d++)this.unsubscribe(a,b[d]);return}var e=c[b].indexOf(a);e>-1&&c[b].splice(e,1)},publish:function(b,c,d,e){b=new a(b,c,e),b.status=1,b.pointer=0,b.dispatcher=d,this.publishNotification(b)},publishNotification:function(a){var c=a.name;b.push(a),this._notifyObjects(a)},_notifyObjects:function(a){var b=a.name,d=c[b].splice(0),e=d.length;while(a.pointer<e){if(a.status!=1)return;d[a.pointer](a),a.pointer++}d=null,a.status===1&&!a.callback&&a.cancel()},releaseNotification:function(a){a.status=1,b.indexOf(a)>-1&&this._notifyObjects(a)},cancelNotification:function(a){var c=a.name;b.splice(b.indexOf(a),1),a=null}})});var d=minion.get("minion.NotificationManager");minion.enableNotifications()}();
